{
  "version": 3,
  "sources": ["../../../src/code-generation/integration-schemas/entities-module.ts"],
  "sourcesContent": ["import bluebird from 'bluebird'\nimport { jsonSchemaToTypeScriptType } from '../generators'\nimport { Module, ModuleDef, ReExportTypeModule } from '../module'\nimport * as strings from '../strings'\nimport type * as types from '../typings'\n\nexport class EntityModule extends Module {\n  public static async create(name: string, entity: types.EntityDefinition): Promise<EntityModule> {\n    const entityName = name\n    const schema = entity.schema\n    const exportName = strings.typeName(entityName)\n    const def: ModuleDef = {\n      path: `${name}.ts`,\n      exportName,\n      content: await jsonSchemaToTypeScriptType(schema, exportName),\n    }\n    return new EntityModule(def)\n  }\n}\n\nexport class EntitiesModule extends ReExportTypeModule {\n  public static async create(entities: Record<string, types.EntityDefinition>): Promise<EntitiesModule> {\n    const entityModules = await bluebird.map(Object.entries(entities), async ([entityName, entity]) =>\n      EntityModule.create(entityName, entity)\n    )\n\n    const inst = new EntitiesModule({\n      exportName: strings.typeName('entities'),\n    })\n    inst.pushDep(...entityModules)\n    return inst\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqB;AACrB,wBAA2C;AAC3C,oBAAsD;AACtD,cAAyB;AAGlB,MAAM,qBAAqB,qBAAO;AAAA,EACvC,aAAoB,OAAO,MAAc,QAAuD;AAC9F,UAAM,aAAa;AACnB,UAAM,SAAS,OAAO;AACtB,UAAM,aAAa,QAAQ,SAAS,UAAU;AAC9C,UAAM,MAAiB;AAAA,MACrB,MAAM,GAAG;AAAA,MACT;AAAA,MACA,SAAS,UAAM,8CAA2B,QAAQ,UAAU;AAAA,IAC9D;AACA,WAAO,IAAI,aAAa,GAAG;AAAA,EAC7B;AACF;AAEO,MAAM,uBAAuB,iCAAmB;AAAA,EACrD,aAAoB,OAAO,UAA2E;AACpG,UAAM,gBAAgB,MAAM,gBAAAA,QAAS;AAAA,MAAI,OAAO,QAAQ,QAAQ;AAAA,MAAG,OAAO,CAAC,YAAY,MAAM,MAC3F,aAAa,OAAO,YAAY,MAAM;AAAA,IACxC;AAEA,UAAM,OAAO,IAAI,eAAe;AAAA,MAC9B,YAAY,QAAQ,SAAS,UAAU;AAAA,IACzC,CAAC;AACD,SAAK,QAAQ,GAAG,aAAa;AAC7B,WAAO;AAAA,EACT;AACF;",
  "names": ["bluebird"]
}
